<!DOCTYPE html>
<html>
<head>
  <title>Retirement Calculator</title>
</head>
<body>
  <h1>Enter Your Info</h1>
  <input type="number" id="age" placeholder="Age" />
  <input type="number" id="retage" placeholder="Retirement Age" />
  <input type="number" id="returns" placeholder="Real returns (%)" />
  <input type="number" id="income" placeholder="Yearly Income" />
  <input type="number" id="expenses" placeholder="Yearly Expenses" />
  <input type="number" id="init" placeholder="Initial Capital" />
  <button onclick="run_function()">Generate Image</button>
  <br><br>
  <img id="resultImage" alt="Your Image Will Appear Here" />

  <script>
    async function run_function() {
      const age = document.getElementById('age').value;
      const retage = document.getElementById('retage').value;
      const returns = document.getElementById('returns').value;
      const income = document.getElementById('income').value;
      const expenses = document.getElementById('expenses').value;
      const init = document.getElementById('init').value;

      const url = `/api/user_image?age=${encodeURIComponent(age)}&retage=${encodeURIComponent(retage)}&returns=${encodeURIComponent(returns)}&income=${encodeURIComponent(income)}&expenses=${encodeURIComponent(expenses)}&init=${encodeURIComponent(init)}`;

      const response = await fetch(url);
      if (response.ok) {
        const blob = await response.blob();
        document.getElementById('resultImage').src = URL.createObjectURL(blob);
      } else {
        alert('Something went wrong.');
      }
    }
  </script>
</body>
</html>